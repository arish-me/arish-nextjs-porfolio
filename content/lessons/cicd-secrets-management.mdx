---
title: Secrets Management
chapterSlug: cicd-environments
duration: 8
order: 2
---

## GitHub Secrets Best Practices

1. **Never** commit secrets to code
2. Use environment-specific secrets
3. Rotate secrets regularly
4. Use least privilege

## Required Secrets for Rails

```yaml
# Repository Secrets
DATABASE_URL
REDIS_URL
SECRET_KEY_BASE
RAILS_MASTER_KEY

# Deployment Secrets
HEROKU_API_KEY
RAILWAY_TOKEN
AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY
```

## Using RAILS_MASTER_KEY

```yaml
steps:
  - name: Decrypt credentials
    env:
      RAILS_MASTER_KEY: ${{ secrets.RAILS_MASTER_KEY }}
    run: bundle exec rails credentials:show
```

## Generating Secrets

```bash
# Generate secret key
rails secret

# Generate master key
EDITOR=vim rails credentials:edit
```

## Organization Secrets

Share secrets across repositories:

1. Go to Organization Settings
2. Click Secrets and Variables
3. Create organization secret
4. Select repository access

## Dependabot Secrets

For automated dependency updates:

```yaml
# Dependabot can access these
name: dependabot-secrets
```


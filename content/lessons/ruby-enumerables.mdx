---
title: Enumerables and Iterators
chapterSlug: ruby-basics
duration: 10
order: 5
---

## Enumerables and Iterators

The Enumerable module is one of Ruby's most powerful features. It provides a set of methods for traversing, searching, and manipulating collections. You'll use these constantly in Rails!

## The Each Method

The foundation of iteration in Ruby:

```ruby
# Array iteration
fruits = ["apple", "banana", "cherry"]

fruits.each do |fruit|
  puts "I like #{fruit}"
end

# With index
fruits.each_with_index do |fruit, index|
  puts "#{index + 1}. #{fruit}"
end

# Hash iteration
user = { name: "John", age: 30, city: "NYC" }

user.each do |key, value|
  puts "#{key}: #{value}"
end

# Range iteration
(1..5).each { |n| puts n }
```

## Map/Collect - Transform Elements

Create a new array by transforming each element:

```ruby
numbers = [1, 2, 3, 4, 5]

# Double each number
doubled = numbers.map { |n| n * 2 }
# => [2, 4, 6, 8, 10]

# Get user names from objects
users = [
  { name: "John", age: 30 },
  { name: "Jane", age: 25 }
]

names = users.map { |user| user[:name] }
# => ["John", "Jane"]

# Shorthand for simple method calls
words = ["hello", "world"]
words.map(&:upcase)
# => ["HELLO", "WORLD"]

# In Rails, you'll often see:
@users.map(&:email)  # Get all user emails
```

## Select/Find_all - Filter Elements

Get elements that match a condition:

```ruby
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# Get even numbers
evens = numbers.select { |n| n.even? }
# => [2, 4, 6, 8, 10]

# Get numbers greater than 5
large = numbers.select { |n| n > 5 }
# => [6, 7, 8, 9, 10]

# Filter users by age
users = [
  { name: "John", age: 30 },
  { name: "Jane", age: 17 },
  { name: "Bob", age: 25 }
]

adults = users.select { |user| user[:age] >= 18 }
# => [{ name: "John", age: 30 }, { name: "Bob", age: 25 }]
```

## Reject - Exclude Elements

The opposite of select:

```ruby
numbers = [1, 2, 3, 4, 5]

# Reject even numbers (keep odd)
odds = numbers.reject { |n| n.even? }
# => [1, 3, 5]

# Reject inactive users
users = users.reject { |user| user[:status] == "inactive" }
```

## Find/Detect - Find First Match

Get the first element that matches:

```ruby
numbers = [1, 2, 3, 4, 5]

# Find first even number
first_even = numbers.find { |n| n.even? }
# => 2

# Find user by name
users = [
  { name: "John", age: 30 },
  { name: "Jane", age: 25 }
]

john = users.find { |user| user[:name] == "John" }
# => { name: "John", age: 30 }

# Returns nil if not found
missing = numbers.find { |n| n > 100 }
# => nil
```

## Reduce/Inject - Accumulate Values

Combine all elements into a single value:

```ruby
numbers = [1, 2, 3, 4, 5]

# Sum all numbers
sum = numbers.reduce(0) { |total, n| total + n }
# => 15

# Shorthand
sum = numbers.reduce(0, :+)
# => 15

# Without initial value (uses first element)
sum = numbers.reduce(:+)
# => 15

# Multiply all numbers
product = numbers.reduce(1, :*)
# => 120

# Build a hash
words = ["apple", "banana", "cherry"]
word_lengths = words.reduce({}) do |hash, word|
  hash[word] = word.length
  hash
end
# => { "apple" => 5, "banana" => 6, "cherry" => 6 }

# Flatten nested arrays
nested = [[1, 2], [3, 4], [5, 6]]
flat = nested.reduce([], :+)
# => [1, 2, 3, 4, 5, 6]
```

## All?, Any?, None?, One?

Check conditions across collections:

```ruby
numbers = [2, 4, 6, 8, 10]

# Are all numbers even?
numbers.all?(&:even?)  # => true

# Is any number greater than 5?
numbers.any? { |n| n > 5 }  # => true

# Are none of the numbers negative?
numbers.none?(&:negative?)  # => true

# Is exactly one number equal to 4?
numbers.one? { |n| n == 4 }  # => true
```

## Count, Size, Length

Get collection size or count matching elements:

```ruby
numbers = [1, 2, 3, 4, 5, 2, 2]

numbers.length  # => 7
numbers.size    # => 7 (alias)
numbers.count   # => 7

# Count specific value
numbers.count(2)  # => 3

# Count with condition
numbers.count(&:even?)  # => 4
```

## Sort and Sort_by

Order elements:

```ruby
numbers = [3, 1, 4, 1, 5, 9, 2, 6]

numbers.sort      # => [1, 1, 2, 3, 4, 5, 6, 9]
numbers.sort.reverse  # => [9, 6, 5, 4, 3, 2, 1, 1]

# Custom sort
words = ["banana", "apple", "cherry"]
words.sort  # => ["apple", "banana", "cherry"]

# Sort by length
words.sort_by(&:length)
# => ["apple", "cherry", "banana"]

# Sort users by age
users = [
  { name: "John", age: 30 },
  { name: "Jane", age: 25 },
  { name: "Bob", age: 35 }
]

users.sort_by { |user| user[:age] }
# => [Jane, John, Bob]

# Descending order
users.sort_by { |user| -user[:age] }
# => [Bob, John, Jane]
```

## Group_by - Group Elements

Create a hash of grouped elements:

```ruby
numbers = [1, 2, 3, 4, 5, 6]

# Group by even/odd
grouped = numbers.group_by(&:even?)
# => { false => [1, 3, 5], true => [2, 4, 6] }

# Group users by role
users = [
  { name: "John", role: "admin" },
  { name: "Jane", role: "user" },
  { name: "Bob", role: "admin" }
]

by_role = users.group_by { |user| user[:role] }
# => { "admin" => [...], "user" => [...] }
```

## Partition - Split into Two

Divide elements based on condition:

```ruby
numbers = [1, 2, 3, 4, 5, 6]

evens, odds = numbers.partition(&:even?)
# evens => [2, 4, 6]
# odds => [1, 3, 5]
```

## First, Last, Take, Drop

Access specific elements:

```ruby
numbers = [1, 2, 3, 4, 5]

numbers.first     # => 1
numbers.first(2)  # => [1, 2]
numbers.last      # => 5
numbers.last(2)   # => [4, 5]

numbers.take(3)   # => [1, 2, 3]
numbers.drop(2)   # => [3, 4, 5]
```

## Compact - Remove Nils

```ruby
array = [1, nil, 2, nil, 3]

array.compact  # => [1, 2, 3]
```

## Flatten - Flatten Nested Arrays

```ruby
nested = [[1, 2], [3, [4, 5]]]

nested.flatten      # => [1, 2, 3, 4, 5]
nested.flatten(1)   # => [1, 2, 3, [4, 5]] (one level)
```

## Uniq - Remove Duplicates

```ruby
numbers = [1, 2, 2, 3, 3, 3]

numbers.uniq  # => [1, 2, 3]

# Unique by attribute
users.uniq { |user| user[:email] }
```

## Chaining Methods

You can chain enumerable methods:

```ruby
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

result = numbers
  .select(&:even?)        # Get even numbers
  .map { |n| n * 2 }      # Double them
  .take(3)                # Take first 3
# => [4, 8, 12]

# In Rails
@users
  .where(active: true)
  .order(:name)
  .map(&:email)
```

Mastering enumerables will make you incredibly productive in Ruby and Rails!

